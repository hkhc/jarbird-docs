---
title: Simple library - A minimal demo
tags: tutorial
sidebar_label: Simple library
sidebar_position: 2
---
Let's take a look at the simplest sample project.

The sample project is [here](https://github.com/hkhc/jarbird-samples/simplelib).

It is an absolutely minimal Java library that contains a single Java class 
`samplelib.Hello` that do trivial work. In this minimal example we are going to
publish it to **Maven Local repository** so that other projects in your computer 
can make use of it. We don't need any remote credential set up for this example. 
By default, the Maven Local repository is located at `~/.m2/repository` for Unix/macOS 
or `C:\Users\{your-username}\.m2\repository` for Windows. We will check our result 
of publishing there. (To keep description simple, I will use Unix style path form 
now on, please adapt it for Windows environment).

## pom.yaml

First we look at the `pom.yaml` file. It is a Jarbird plugin specific file to 
specify the information about your component.

```yaml title="pom.yaml"
group: jarbirdsamples
artifactId: simplelib
version: 1.0-SNAPSHOT
```

So here is the typical [GAV](https://maven.apache.org/guides/mini/guide-naming-conventions.html) 
(Group, Artifact ID, Version) coordinate of Java component. In the good old days of building 
Java library, we put this information in `build.gradle`. The benefit of taking that out of 
`build.gradle` will be obvious when we work on more sophsicated scenarios. It is also OK to 
leave this information in `build.gradle`. We can even omit artifactId, then 
the project name (usually the project directory name) will be the `artifactId`.

Note that the version of our component is suffix with `-SNAPSHOT`, which 
signifies that the component is a snapshot component. Snapshot components will 
not be signed, which save us some effort to make our minimal component works.

## build.gradle

The next thing is our familiar `build.gradle`. First we have the plugin declaration at the top of file.

<!--tabs-->
# Groovy
```groovy title="build.gradle"
plugins {
    id 'java'
    id 'io.hkhc.jarbird' version '{{jarbirdVersion}}'
}
// ...
```
# Kotlin
```kotlin title="build.gradle.kts"
plugins {
    id("java")
    id("io.hkhc.jarbird") version "{{jarbirdVersion}}"
}
// ...
```
<!--/tabs-->

The Jarbird plugin setups (almost) everything we need to publish components,
including applying plugins, setup publication definition, createing POM file, etc.

The last bit we need is to tell Jarbird plugin that we publish our component 
to Maven Local repository.

<!--tabs-->
# Groovy
```groovy title="build.gradle"
// ...
jarbird {
    pub {
        mavenLocal()
    }
}
// ...
```
# Kotlin
```kotlin title="build.gradle.kts"
// ...
jarbird {
    pub {
        mavenLocal()
    }
}
// ...
```
<!--/tabs-->

All configuration that we tell will be in the `jarbird` extension. This block indicates we have one `pub` (means publication) which will be published to Maven Local repository.

That's it!

## Run it

Let's take a look at the Gradle tasks provided by Jarbird plugin. In your shell which the current directory is the `simplelib` we are working with. We list the available tasks by:

```shell-session
$ ./gradlew tasks
```

We see a section that we may not familiar with:

``` text
Jarbird publishing tasks
------------------------
jbPublish - Publish
jbPublishSimplelib - Publish module 'simplelib' to all targeted repositories
jbPublishSimplelibToMavenLocal - Publish module 'simplelib' to Maven Local repository
jbPublishToMavenLocal - Publish to Maven Local repository
```

All Gradle tasks added by Jarbird plugin are under the group 'Jarbird publishing tasks' and prefixed by 'jb'. So let's publish our component:

```shell-session
$ ./gradlew jbPublish

> Task :jbDokkaHtmlSimplelib
Initializing plugins
Dokka is performing: documentation for simplelib
Validity check
Creating documentation models

WARN: The registry key 'java.correct.class.type.by.place.resolve.scope' accessed, but not loaded yet

> Task :jbDokkaHtmlSimplelib
Transforming documentation model before merging
Merging documentation models
Transforming documentation model after merging
Creating pages
Transforming pages
Rendering


BUILD SUCCESSFUL in 9s
9 actionable tasks: 9 executed

```

We may ignore the warning at the moment. To check if we have published the component successfully, check the directory `~/.m2/repository/jarbirdsamples/simplelib/1.0-SNAPSHOT`

```shell-session
$ ls -1 ~/.m2/repository/jarbirdsamples/simplelib/1.0-SNAPSHOT
maven-metadata-local.xml
simplelib-1.0-SNAPSHOT-javadoc.jar
simplelib-1.0-SNAPSHOT-sources.jar
simplelib-1.0-SNAPSHOT.jar
simplelib-1.0-SNAPSHOT.module
simplelib-1.0-SNAPSHOT.pom
```

So we have the Jar file itself, archive of source code, archive of javadoc, POM file. Everything we need as a Java component in Maven repository are present (except signatures, that we will come to that shortly).

We could use the component in other projects of the same computer, by adding this line to the `build.gradle` of these projects:

<!--tabs-->
# Groovy
```groovy title="build.gradle"
buildscript {
    mavenLocal()
    // ... other repositories
}
dependencies {
    implementation 'jarbirdsamples:simplelib:1.0'
    // ... other dependencies
}
```
# Kotlin
```kotlin title="build.gradle.kts"
buildscript {
    mavenLocal()
    // ... other repositories
}
dependencies {
    implementation("jarbirdsamples:simplelib:1.0")
    // ... other dependencies
}
```
<!--/tabs-->

So we have completed our first trial of Jarbird plugin.
